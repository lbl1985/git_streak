<!DOCTYPE html>
<html>
    <header>
        <link rel="stylesheet" href="style.css">
        
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="./node_modules/moment/moment.js"></script>
        <script>
            var cycle_color = function(event) {
            var current_step = Number($(this).attr('data-activity') || 0)  
                if (current_step == 4) { current_step = -1 }
                
                var next_step = Number(current_step) + 1
                $(this).attr('data-activity', next_step)
            }
            
            $(document).ready(function() {
                
                /*** draw months ***/ 
                
                var month = moment();
                var outputMonth = "<ol class = 'month'>";
                for (i = 0; i <= 12; i++) {
                var durationMonth = moment.duration({'months' : 1});
                outputMonth += "<li>";
                outputMonth += moment(month).format("MMM");
                outputMonth += "</li>";
                month = moment(month).subtract(durationMonth);
                }
                outputMonth += "</ol>";
                
                var output = "<ol><div class = 'week'>";
                var day = moment();
                
                /* Calculate the offset for days of the week to line up correctly */
                var dayOfWeekOffset = 6 - (parseInt(moment().format("d"),10));
                for (i = 0; i < (dayOfWeekOffset); i++) { output += "<li class = 'offset'></li>"; }
                
                /*** draw calendar ***/
                
                for (i = 365; i >= 0; i--) {
                output += "<li>";
                output += '<span class = "tooltip">' + moment(day).format("MM-DD-YY")  +  '</span>';
                output += "</li>";
                
                var duration = moment.duration({'days' : 1});
                day = moment(day).subtract(duration);
                }
                
                output += "</div></ol>";
                document.getElementById("month").innerHTML = outputMonth;
                document.getElementById("days").innerHTML = output;
                
                $('li').click(cycle_color);
            });
        </script>
    </header>
    <body>
        <div class="activity-chart">
            <h1> Click on each day to increase its activity</h1>
            <ol class="days-of-week">
                <li>M</li>
                <li>W</li>
                <li>F</li>
            </ol>
            <div id="month" class="month"></div>
            <div id="days" class="days"></div>
            <div class="key">
                <strong>Less</strong>
                <ul>
                    <li class="activity-4"></li>
                    <li class="activity-3"></li>
                    <li class="activity-2"></li>
                    <li class="activity-1"></li>
                    <li class="activity-0"></li>
                </ul>
                <strong>More</strong>
            </div>

        </div>
    </body>
</html>